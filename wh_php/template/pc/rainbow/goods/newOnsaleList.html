<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{$Think.lang.ProductList}</title>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <link rel="stylesheet" type="text/css" href="__STATIC__/css/tpshop.css" />
    <link rel="shortcut  icon" type="image/x-icon" href="__STATIC__/images/logo2.ico" media="screen"  />
    <script src="__STATIC__/js/jquery-1.11.3.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="__PUBLIC__/js/layer/layer-min.js"></script>
    <script src="__PUBLIC__/js/global.js"></script>
    <script src="__PUBLIC__/js/pc_common.js"></script>
    <link rel="stylesheet" href="__STATIC__/css/location.css" type="text/css">
    <style>
        @media screen and (max-width: 1298px) {
            .header .ecsc-join{
                display: none;
            }
            .top-ri-header ul li{
                padding: 0 4px;
            }
            .list1 .dd{
                width: 200px !important;
            }
            .footer{
                min-width: inherit;
            }
            .navitems{
                width: 840px;
            }
            .categorys .dt a{
                width: 100px;
            }
            .categorys{
                width: 140px;
            }
            .footer .foot-list-fl{
                width: 608px;
            }
            .footer .foot-list-fl ul{
                width: 120px;
            }
            .categorys .cata-nav-name h3{
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
            }
            .home_categorys .cata-nav-layer{
                left: 180px !important;
            }
            .categorys .cata-nav-layer{
                width: 840px;
            }
            .categorys .cata-nav-layer .cata-nav-rigth{
                display: none;
            }
            .categorys .dt a:before{
                margin-right: 0;
                width: 0;
            }
            .sendaddress{
                display: none;
            }
            .tp_h_alone .ecsc-search{
                margin: 10px 0 0 40px;
            }
            .tp_h_alone .navitems{
                width: 790px;
            }
            .tp_h_alone .categorys2 .cata-nav-layer .cata-nav-rigth{
                display: none;
            }
            .tp_h_alone .categorys2 .cata-nav-layer{
                width: 800px;
            }
        }
        @media screen and (min-width: 1298px){
            .tp_h_alone .ecsc-search{
                margin: 10px 0 0 150px;
            }
            .u-g-cart{
                width: 160px;
            }
        }
    </style>
</head>
<body>
<include file="public/header"/>

<div class="shop-list-tour ma-to-20 p">
    <div class="w1224">
        <div class="tjhot fl">
            <div class="sx_topb"><h3>{$Think.lang.RecommendHot}</h3></div>
            <div class="tjhot-shoplist" id="ajax_hot_goods">
                <foreach name="hot_goods" item="vo" key="k">
                    <div class="alone-shop">
                        <a href="{:U('Home/Goods/goodsInfo',array('id'=>$vo.goods_id))}"><img class="lazy" src="{$vo.image|goods_images=160,160}"/></a>
                        <p class="line-two-hidd"><a href="{:U('Home/Goods/goodsInfo',array('id'=>$vo.goods_id))}">{$vo.goods_name}</a></p>
                        <p class="price-tag"><span class="li_xfo">￥</span><span>{$vo.shop_price}</span></p>
                        <p class="store-alone"><a href="{:U('Home/Store/index',array('id'=>$vo.store_id))}">{$vo.store_name}</a></p>
                    </div>
                </foreach>
            </div>
        </div>
        <div class="stsho fr">

            <div class="shop-list-splb p">
                <ul>
                    <empty name="newList">
                        <p class="ncyekjl" style="font-size: 16px;margin:100px auto;text-align: center;">-- {$Think.lang.SearchTips}！--</p>
                        <else/>
                        <foreach name="newList" item="v" key="k">
                            <li>
                                <div class="s_xsall">
                                    <div class="xs_img">
                                        <a href="{:U('/Home/Goods/goodsInfo',array('id'=>$v[goods_id]))}">
                                            <img class="lazy-list" src="{$v.image|goods_images=199,199}"/>
                                        </a>
                                    </div>
                                    <div class="xs_slide">
                                        <div class="small-xs-shop">
                                            <ul>
                                                <foreach name="goods_images" item="v2" key="k2">
                                                    <if condition="$v2[goods_id] eq $v[goods_id]">
                                                        <li>
                                                            <a href="javascript:void(0);">
                                                                <img class="lazy-list" data-original="{$v2[image_url]}"/>
                                                            </a>
                                                        </li>
                                                    </if>
                                                </foreach>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="price-tag">
                                        <span class="now"><em class="li_xfo">￥</em><em>{$v[shop_price]}</em></span>
                                        <span class="old"><em>{$Think.lang.Symbol}</em><em>{$v[market_price]}</em></span>
                                    </div>
                                    <div class="shop_name1 shop_name2">
                                        <a href="{:U('/Home/Goods/goodsInfo',array('id'=>$v[goods_id]))}">
                                            {$v[goods_name]}
                                        </a>
                                    </div>
                                    <div class="shop_name2">
                                        <a class="co_hchh" href="{:U('/Home/Store/index',array('id'=>$v[store_id]))}">
                                            {$v[store_name]}
                                        </a>
                                    </div>
                                    <!--<div class="J_btn_statu">-->
                                    <!--<div class="p-num">-->
                                    <!--<input class="J_input_val" id="number_{$v.goods_id}" type="text" value="1">-->
                                    <!--<p class="act">-->
                                    <!--<a href="javascript:void(0);" onClick="goods_add({$v.goods_id});" class="litt-zzyl1"></a>-->
                                    <!--<a href="javascript:void(0);" onClick="goods_cut({$v.goods_id});"  class="litt-zzyl2"></a>-->
                                    <!--</p>-->
                                    <!--</div>-->
                                    <!--<div class="p-btn">-->
                                    <!--<a href="javascript:void(0);" onclick="AjaxAddCart({$v[goods_id]},$('#number_'+{$v.goods_id}).val(),0);">加入购物车</a>-->
                                    <!--</div>-->
                                    <!--</div>-->
                                </div>
                            </li>
                        </foreach>
                    </empty>

                </ul>
            </div>
            <div class="page p">
                {$page}
            </div>
        </div>
    </div>
</div>
<if condition="$flags eq 1">
    <else/>
    <div class="underheader-floor p specilike">
        <div class="w1224">
            <div class="layout-title">
                <span class="fl"> {$Think.lang.GuessLike}</span>
                <span class="update_h fr" onclick="favourite();">
                <i class="litt-hyh"></i>
                {$Think.lang.Change}
            </span>
            </div>
            <ul class="ul-li-column p" id="favourite_goods">
            </ul>
        </div>
    </div>
</if>

<script>
    /****猜你喜欢****/
    var favorite_page = 0;
    function favourite()
    {
        favorite_page++;
        $.ajax({
            type: "GET",
            url: "/index.php?m=Home&c=Index&a=ajax_favorite&i=6&p="+favorite_page,//+tab,
            success: function (data) {
                if(data == ''){
                    favorite_page = 0;
                    favourite();
                }else{
                    $('#favourite_goods').html(data);
                    lazy_ajax();
                }

            }
        });
    }
</script>
<!--footer-s-->
<div class="footer p">
    <div class="mod_service_inner">
        <!--只有这个页面的class是w1430-->
        <div class="w1224">
            <ul>
                <li>
                    <div class="mod_service_unit">
                        <img src="__STATIC__/images/footer_01.jpg" class="list_foot">
                        <p>{$Think.lang.Invoice}</p>
                    </div>
                </li>
                <li>
                    <div class="mod_service_unit">
                        <img src="__STATIC__/images/footer_02.jpg" class="list_foot">
                        <p>{$Think.lang.CategoryComplete}</p>
                    </div>
                </li>
                <li>
                    <div class="mod_service_unit">
                        <img src="__STATIC__/images/footer_03.jpg" class="list_foot">
                        <p>{$Think.lang.SaleWorryFree}</p>
                    </div>
                </li>
                <li>
                    <div class="mod_service_unit">
                        <img src="__STATIC__/images/footer_04.jpg" class="list_foot">
                        <p>{$Think.lang.SampleCollection}</p>
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <div class="w1224">
        <!--<//include file="public/footer_index" />-->
        <div class="footer-ewmcode">
            <div class="foot-list-fl">
                <foreach name="GetArticleCat"  key="k" item='v'>
                    <dl class="foot-con">
                        <dt>{$v[name]}</dt>
                        <foreach name="GetArticle"  key="k2" item='v2'>
                            <if condition="$v['name'] eq $v2['category']">
                                <dd>
                                    <a target="_blank" href="{:U('Home/Article/detail',array('article_id'=>$v2[article_id]))}">{$v2[title]}</a>
                                </dd>
                            </if>

                        </foreach>
                    </dl>
                </foreach>
            </div>
        </div>
        <div class="mod_copyright p">
            <p>Copyright © 2016-2025 {$walhao_config['shop_info_store_name']|default='商城'} {$Think.lang.AllSreserved} {$Think.lang.AllRightSreserved} {$Think.lang.CaseNumber}:{$walhao_config['shop_info_record_no']}<br>增值电信业务许可证：浙B2-20170157 丨
                <a target="_blank" style="color:#5d5def" href="__STATIC__/images/yingyezhizhao.jpg">{$Think.lang.BusinessLicense}</a>
            </p>
            <p>
                <script type="text/javascript">
                    var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
                    document.write(unescape("%3Cspan id='cnzz_stat_icon_1255962454'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s4.cnzz.com/z_stat.php%3Fid%3D1255962454%26show%3Dpic' type='text/javascript'%3E%3C/script%3E"));
                </script>
            </p>

            <!--<p class="mod_copyright_auth">
                <a class="mod_copyright_auth_ico mod_copyright_auth_ico_1" href="" target="_blank">经营性网站备案中心</a>
                <a class="mod_copyright_auth_ico mod_copyright_auth_ico_2" href="" target="_blank">可信网站信用评估</a>
                <a class="mod_copyright_auth_ico mod_copyright_auth_ico_3" href="" target="_blank">网络警察提醒你</a>
                <a class="mod_copyright_auth_ico mod_copyright_auth_ico_4" href="" target="_blank">诚信网站</a>
                <a class="mod_copyright_auth_ico mod_copyright_auth_ico_5" href="" target="_blank">中国互联网举报中心</a>
                <a class="mod_copyright_auth_ico mod_copyright_auth_ico_6" href="" target="_blank">网络举报APP下载</a>
            </p>-->
        </div>
    </div>
    <include file="public/sidebar_cart" />
</div>
<!--footer-e-->
<script src="__STATIC__/js/lazyload.min.js" type="text/javascript" charset="utf-8"></script>
<script src="__STATIC__/js/popt.js" type="text/javascript" charset="utf-8"></script>
<script src="__STATIC__/js/headerfooter.js" type="text/javascript" charset="utf-8"></script>
<script src="__STATIC__/js/location.js"></script>
<script type="text/javascript">

    //        更多
    $('.gd_more').parent().click(function(){
        var jed = $(this).parents('.lr-more').siblings();
        jed.toggleClass('ov-inh').find('.brand-box').toggleClass('ov-inh');
        if(jed.toggleClass('ov-inh').find('.brand-list')){
            jed.toggleClass('ov-inh').find('.brand-list').toggleClass('ov-inh');
        }
        if(jed.hasClass('ov-inh')){
            $(this).find('.gd_more').html('{$Think.lang.PutAway}');
        }else{
            $(this).find('.gd_more').html('{$Think.lang.More}');
        }
    })
    var cancelBtn = null;
    /***多选 start*****/
    $('.dx_choice').parent().click(function(){
        var _this = this;
        var st = 0;
        var jed = $(_this).parents('.ri-section'); //当前选项层DIV

        //关闭前一个多选框
        if(cancelBtn != null){
            $(cancelBtn).parent().siblings('.clearfix').find('a').each(function(i,o){
                $(o).removeClass('addhover-js').find('.litt-zd').hide(); //针对品牌筛选的红色边框和右下角对勾隐藏
                $(o).removeClass('red_hov_cli')    //针对纯文字型选项，隐藏筛选的选中状态
                    .attr('href',$(o).data('href'))  //还原连接
                    .children('input').prop('checked',false).hide(); //隐藏多选框
                $(o).unbind('click');
            });
            $(cancelBtn).parents('.lf-list').siblings('.lr-more').show(); //显示其它多选按钮
            $(cancelBtn).parents('.ri-section').removeClass('sum_ov_inh'); //移除多选样式

        }
        cancelBtn = jed.find('.u-cancel'); //前一个取消按钮

        //打开多选
        jed.addClass('sum_ov_inh'); //添加这一行的样式
        //遍历a标签
        jed.find('.clearfix>a').each(function(i,o){
            $(o).attr('href','javascript:;'); //移除连接
            $(o).children('input').show();  //显示多选框
            $(o).bind('click',function(){
                if($(o).hasClass('red_hov_cli')){
                    //取消选中
                    $(o).find('i').toggle()
                    $(o).removeClass('addhover-js'); //针对品牌选项，改变筛选的选中状态
                    $(o).removeClass('red_hov_cli')
                    $(o).children('input').prop("checked",false);
                    $(o).parent().siblings('.surclofix').children('.u-confirm').removeClass('u-confirm01');
                    st--;
                }else{
                    $(o).addClass('red_hov_cli')
                    $(o).children('input').prop("checked",true);
                    $(o).find('i').toggle()
                    $(o).addClass('addhover-js');
                    $(o).parent().siblings('.surclofix').children('.u-confirm').addClass('u-confirm01');
                    st++;
                }
                //如果没有选中项,确定按钮点不了
                if(st==0){
                    jed.find('.u-confirm').disabled=true;
                }
            });
        });
        //隐藏当前多选按钮
        $(_this).parent().hide();
    });

    /***多选 end*****/
    //############   取消多选        ###########
    $('.surclofix .u-cancel').each(function(){
        $(this).click(function(){
            var jed = $(this).parents('.ri-section');
            //遍历a标签
            jed.find('.clearfix>a').each(function(i,o){
                $(o).removeClass('addhover-js').find('.litt-zd').hide(); //针对品牌筛选的红色边框和右下角对勾隐藏
                $(o).removeClass('red_hov_cli')    //针对纯文字型选项，隐藏筛选的选中状态
                    .attr('href',$(o).data('href'))  //还原连接
                    .children('input').prop('checked',false).hide(); //隐藏多选框
                $(o).unbind('click');
            });
            jed.find('.lr-more').show(); //显示多选按钮
            jed.removeClass('sum_ov_inh') //移除这一行的样式
            $('.u-confirm').removeClass('u-confirm01'); //移除确定按钮可点击标识
        });
    })

    $(function() {
        favourite();
        //左侧边栏JS
//		ajax_hot_goods();
//		ajax_sales_goods();
        //############   更多类别属性筛选  start     ###########
        $('.moreamore').click(function(){
            $('.m-tr').each(function(i,o){
                if(i >  7){
                    var attrdisplay = $(o).css('display');
                    if(attrdisplay == 'none'){
                        $(o).css('display','block');
                    }
                    if(attrdisplay == 'block'){
                        $(o).css('display','none');
                    }
                }
            });
            if($(this).hasClass('checked')){
                $(this).removeClass('checked').html('<a class="red">{$Think.lang.PutAway}</a>');
            }else{
                $(this).addClass('checked').html('<a >{$Think.lang.MoreOptions}</a>');
            }
        })
        $('.moreamore').trigger('click').html('<a >{$Think.lang.MoreOptions}</a>'); //  默认点击一下
        //############   更多类别属性筛选   end    ###########

        /***价格排序 start*****/
        var price_i = 0;
        $('.f-sort ul li').click(function(){
            $(this).addClass('red').siblings().removeClass('red').find('i').removeClass('litt-zzx2').removeClass('litt-zzx3').addClass('litt-zzx1');
            var jd = $(this).find('i');
            price_i++;
            if(price_i>2)price_i=1;
            switch(price_i){
                case 1:jd.addClass('litt-zzx2').removeClass('litt-zzx1').removeClass('litt-zzx3');break;
                case 2:jd.addClass('litt-zzx3').removeClass('litt-zzx2').removeClass('litt-zzx1');break;
            }
        })
        /***价格排序 end*******/
        /***地址选择 start*****/
        $("#city").click(function (e) {
            SelCity(this,e);
        });
        /***地址选择 end*****/
        /***是否自营 start****/
        $('.choice-mo-shop ul li').click(function(){
            $(this).find('.litt-zzdg1').toggleClass('litt-zzdg2');
            $(this).find('a').toggleClass('red');
        })
        /***是否自营 end****/
        /***滑过浏览商品 start***/
        $('.small-xs-shop ul li').hover(function(){
            $(this).addClass('bored').siblings().removeClass('bored');
            var small_src = $(this).find('img').attr('src');
            $(this).parents('.s_xsall').find('.xs_img').find('img').attr('src',small_src);
        },function(){

        })
        /***滑过浏览商品 end***/
    })

    /****加减购物车数额***/
    function goods_cut($val){
        var num_val=document.getElementById('number_'+$val);
        var new_num=num_val.value;
        var Num = parseInt(new_num);
        if(Num>1)Num=Num-1;
        num_val.value=Num;
    }

    function goods_add($val){
        var num_val=document.getElementById('number_'+$val);
        var new_num=num_val.value;
        var Num = parseInt(new_num);
        Num=Num+1;
        num_val.value=Num;
    }
    /****加减购物车数额***/

    //############   点击多选确定按钮      ############
// t 为类型  是品牌 还是 规格 还是 属性
// btn 是点击的确定按钮用于找位置
    get_parment = <?php echo json_encode($_GET); ?>;
    function submitMoreFilter(t,btn)
    {
        // 没有被勾选的时候
        if(!$(btn).hasClass("u-confirm01")){
            return false;
        }

        // 获取现有的get参数
        var key = ''; // 请求的 参数名称
        var val = new Array(); // 请求的参数值
        $(btn).parent().siblings(".clearfix").find(".red_hov_cli").each(function(i,o){
            key = $(o).data('key');
            val.push($(o).data('val'));
        });
        //parment = key+'_'+val.join('_');
//        return false;
        // 品牌
        if(t == 'brand')
        {
            get_parment.brand_id = val.join('_');
        }
        // 规格
        if(t == 'spec')
        {
            if(get_parment.hasOwnProperty('spec'))
            {
                get_parment.spec += '@'+key+'_'+val.join('_');
            }
            else
            {
                get_parment.spec = key+'_'+val.join('_');
            }
        }
        // 属性
        if(t == 'attr')
        {
            if(get_parment.hasOwnProperty('attr'))
            {
                get_parment.attr += '@'+key+'_'+val.join('_');
            }
            else
            {
                get_parment.attr = key+'_'+val.join('_');
            }
        }
        // 组装请求的url
        var url = '';
        for ( var k in get_parment )
        {
            url += "&"+k+'='+get_parment[k];
        }
        console.log('get_parment',get_parment);
        location.href ="/index.php?m=Home&c=Goods&a=goodsList"+url;
    }
    //媒体查询
    $(function(){
        window.onresize=resizeauto;
        resizeauto();
        function resizeauto(){
            var windowW = $(window).width();
            if(windowW > 1280){
                $('.w1430,.w1224,.w1000').addClass('w1224').removeClass('w1340').removeClass('w1000');
            }else if(windowW <= 1280){
                $('.w1430,.w1224,.w1000').addClass('w1000').removeClass('w1224').removeClass('w1430');
            }
        }
    })
</script>
</body>
</html>